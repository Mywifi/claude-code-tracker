<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Claude Tracker - AI Interactions</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism-tomorrow.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-json.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-bash.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-python.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    <link rel="stylesheet" href="/report/static/styles.css">
</head>
<body class="min-h-screen overflow-hidden">
    <div class="max-w-[1600px] mx-auto flex h-screen overflow-hidden border-x border-claude">
        <!-- 侧边栏 -->
        <div class="w-80 sidebar border-r flex flex-col">
            <div class="p-6 border-b border-claude">
                <div class="flex items-center justify-between mb-2">
                    <div class="flex items-center gap-2">
                        <div class="w-3 h-3 bg-amber-600 rounded-full animate-pulse"></div>
                        <h1 class="text-xl font-bold tracking-tight text-claude-text">Claude Tracker</h1>
                    </div>
                    <div class="flex items-center gap-1">
                        <a href="https://github.com/Mywifi/claude-code-tracker" target="_blank" class="p-2 rounded-lg hover:bg-claude-list-hover transition-colors group" title="GitHub Repository">
                            <svg class="w-4 h-4 text-neutral-400 group-hover:text-amber-500 transition-colors" fill="currentColor" viewBox="0 0 24 24">
                                <path d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"/>
                            </svg>
                        </a>
                        <button onclick="toggleTheme()" class="p-2 rounded-lg hover:bg-claude-list-hover transition-colors group" title="Toggle theme">
                            <!-- Sun icon (visible in light mode) -->
                            <svg id="sun-icon" class="w-4 h-4 text-neutral-400 group-hover:text-amber-500 transition-colors hidden" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"></path>
                            </svg>
                            <!-- Moon icon (visible in dark mode) -->
                            <svg id="moon-icon" class="w-4 h-4 text-neutral-600 group-hover:text-amber-500 transition-colors" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"></path>
                            </svg>
                        </button>
                    </div>
                </div>
                <p class="text-[10px] font-black uppercase tracking-[0.2em] text-neutral-500" id="summary-info">INITIALIZING...</p>
            </div>
            <div class="flex-1 overflow-y-auto custom-scrollbar" id="prompt-list">
                <!-- 列表项将在这里动态生成 -->
            </div>
        </div>

        <!-- 主内容区 -->
        <div class="flex-1 detail-view flex flex-col" id="detail-view">
            <div id="welcome-message" class="flex flex-col items-center justify-center h-full text-neutral-600">
                <svg class="w-20 h-20 mb-6 opacity-20" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M8 10h.01M12 10h.01M16 10h.01M9 16H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-5l-5 5v-5z"></path>
                </svg>
                <p class="text-lg font-medium tracking-wide">Select a session to analyze</p>
            </div>
            
            <div id="content-area" class="hidden flex-1 flex flex-col overflow-hidden">
                <div class="header-area z-20 px-10 pt-10 pb-6 shadow-lg">
                    <div class="max-w-5xl mx-auto">
                        <div class="flex justify-between items-start">
                            <div class="space-y-1">
                                <h2 class="text-3xl font-bold text-claude-text tracking-tight" id="detail-model">MODEL</h2>
                                <div class="flex items-center gap-4">
                                    <p class="text-neutral-500 text-xs font-mono" id="detail-time">TIMESTAMP</p>
                                    <span class="text-claude-border">/</span>
                                    <p class="text-amber-600 text-xs font-black uppercase tracking-widest" id="detail-user-id">USER</p>
                                </div>
                            </div>
                            <div class="flex gap-2">
                                <span id="badge-stream" class="px-3 py-1 rounded-sm text-[10px] font-black bg-amber-600/10 text-amber-600 border border-amber-600/20 uppercase tracking-widest">Streaming</span>
                            </div>
                        </div>

                        <!-- Tab 切换 -->
                        <div class="flex gap-6 mt-8">
                            <button onclick="switchTab('render')" id="tab-render" class="tab-btn active pb-2 text-xs font-black uppercase tracking-[0.2em] transition-all">
                                Visual Render
                            </button>
                            <button onclick="switchTab('raw')" id="tab-raw" class="tab-btn pb-2 text-xs font-black uppercase tracking-[0.2em] transition-all">
                                Raw Analysis
                            </button>
                        </div>
                    </div>
                </div>

                <!-- 可滚动的内容区域 -->
                <div class="flex-1 overflow-y-auto p-10 custom-scrollbar relative scroll-smooth" id="scroll-container">
                    <div class="max-w-5xl mx-auto pb-32">
                        <!-- 渲染布局：包含内容和目录 -->
                        <div id="render-layout" class="flex gap-12">
                            <div id="view-render" class="flex-1 space-y-12 min-w-0">
                                <!-- 系统提示词 -->
                                <div id="section-system">
                                    <h3 class="text-xs font-black text-neutral-500 uppercase tracking-[0.3em] mb-6 flex items-center">
                                        <span class="w-8 h-[1px] bg-amber-600/30 mr-4"></span>
                                        System Directives
                                    </h3>
                                    <div id="system-container" class="space-y-4"></div>
                                </div>

                                <!-- 对话内容 -->
                                <div id="section-messages">
                                    <h3 class="text-xs font-black text-neutral-500 uppercase tracking-[0.3em] mb-6 flex items-center">
                                        <span class="w-8 h-[1px] bg-blue-600/30 mr-4"></span>
                                        Interaction Log
                                    </h3>
                                    <div id="messages-container" class="space-y-10"></div>
                                </div>

                                <!-- AI 响应内容 -->
                                <div id="section-response">
                                    <h3 class="text-xs font-black text-neutral-500 uppercase tracking-[0.3em] mb-6 flex items-center">
                                        <span class="w-8 h-[1px] bg-green-600/30 mr-4"></span>
                                        Final Response
                                    </h3>
                                    <div id="thinking-container" class="mb-6 hidden">
                                        <div class="bg-amber-900/10 border border-amber-900/50 rounded-lg overflow-hidden">
                                            <div class="bg-amber-900/20 px-4 py-2 flex items-center gap-2 border-b border-amber-900/30">
                                                <svg class="w-3 h-3 text-amber-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"></path>
                                                </svg>
                                                <span class="text-[9px] font-black text-amber-500 uppercase tracking-[0.2em]">Thinking Process</span>
                                            </div>
                                            <div id="thinking-content" class="p-5 text-sm text-amber-500/80 italic leading-relaxed"></div>
                                        </div>
                                    </div>
                                    <div id="response-container" class="space-y-4"></div>
                                </div>

                                <!-- 工具定义 -->
                                <div class="hidden" id="tools-section">
                                    <h3 class="text-xs font-black text-neutral-500 uppercase tracking-[0.3em] mb-6 flex items-center">
                                        <span class="w-8 h-[1px] bg-purple-600/30 mr-4"></span>
                                        Tool Definitions
                                    </h3>
                                    <div id="tools-container" class="space-y-4"></div>
                                </div>
                            </div>

                            <!-- 目录 TOC -->
                            <div id="toc-container" class="w-48 shrink-0 hidden lg:block sticky top-0 h-[calc(100vh-200px)] pt-2 overflow-y-auto custom-scrollbar">
                                <p class="text-[10px] font-black text-neutral-600 uppercase tracking-[0.2em] mb-6 sticky top-0 bg-claude-bg pb-2 z-10">Contents</p>
                                <nav id="toc-list" class="space-y-3 text-[10px] border-l border-claude"></nav>
                            </div>
                        </div>

                        <!-- 原始 JSON 视图 -->
                        <div id="view-raw" class="hidden">
                            <div class="bg-claude-bg border border-claude rounded-lg p-8 overflow-x-auto shadow-2xl text-xs custom-scrollbar">
                                <pre><code class="language-json" id="raw-json-code"></code></pre>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <script src="/report/static/app.js"></script>
</body>
</html>
